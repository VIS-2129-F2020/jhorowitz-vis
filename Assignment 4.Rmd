---
title: "Assignment 4: Network Analysis"
author: "Jennifer Horowitz"
date: "10/2/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = F, message = F)
```


## R Markdown

```{r}
library(osmdata)
library(opentripplanner)
library(tidyverse)
library(sf)
library(ggthemes)
library(ggspatial)
```
```{r}
#foodpermits <- read.csv ("Short_Term_Rentals.csv") 
#WGS <- '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs'
#foodpermits <- foodpermits %>%

  #st_as_sf(x = foodpermits, coords = c("long", "lat"),crs=WGS)

```


```{r load library locations}
COVIDtesting <- st_read(
  "https://data.cambridgema.gov/api/geospatial/iect-ma2e?method=export&format=KML")
```

```{r}
#opq(bbox = 'Los Angeles CA USA') %>%
  #add_osm_feature(key = 'highway') %>%
  #osmdata_xml(file = 'OTP/graphs/default/testingsites.osm')
```
```{r}
MA_state_plane <- "+proj=lcc +lat_1=41.71666666666667 +lat_2=42.68333333333333 +lat_0=41 +lon_0=-71.5 +x_0=200000 +y_0=750000 +ellps=GRS80 +units=m +no_defs"
```




```{r}
#latestingsites_features <- opq(bbox = 'Los Angeles CA USA',timeout= 100) %>%
  #add_osm_feature(key = 'highway') %>%
  #osmdata_sf()
```
```{r}
#testingsites <- latestingsites_features$osm_lines %>%
  #st_transform(crs = CA_state_plane)
```


```{r}
#opq(bbox = 'Cambridge MA USA') %>%
  #add_osm_feature(key = 'highway') %>%
  #osmdata_xml(file = 'OTP/graphs/default/cambridge_streets.osm')
```
```


```{r}
cambridge_street_features <- opq(bbox = 'Cambridge MA USA') %>%
  add_osm_feature(key = 'highway') %>%
  osmdata_sf()
cambridge_streets <- cambridge_street_features$osm_lines %>%
  st_transform(crs = MA_state_plane)
```
```{r}
##path_otp <- otp_dl_jar("OTP")
```

```{r, message=FALSE, results='hide'}
path_data <- read.csv("   ")
#path_data <- file.path(getwd(), "OTP")
path_otp <- paste(path_data, "otp.jar",sep = "/")
otp_build_graph(otp = path_otp, dir = path_data, memory = 1024) 
```




